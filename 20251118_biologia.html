<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Test z Biologii ‚Äî Uk≈Çad krwiono≈õny i limfatyczny</title>
<style>
  :root{
    --bg: #eaf7ea;
    --card: #ffffff;
    --accent: #2b8a3e;
    --accent-dark: #216a30;
    --muted: #6b6b6b;
    --success: #2e8b57;
    --danger: #c02b2b;
    --shadow: 0 6px 18px rgba(34,34,34,0.06);
  }
  *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{
    margin:0;
    min-height:100vh;
    background: linear-gradient(180deg, #f3fbf3 0%, var(--bg) 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  .container{
    width:100%;
    max-width:920px;
    background:var(--card);
    border-radius:12px;
    box-shadow:var(--shadow);
    padding:22px;
    border:1px solid rgba(33,138,62,0.06);
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:14px;
  }
  h1{margin:0;font-size:20px;color:var(--accent-dark)}
  .meta{color:var(--muted);font-size:14px}
  .status{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .hearts{font-size:20px}
  .score{background:linear-gradient(90deg,var(--accent) 0%,var(--accent-dark) 100%);color:white;padding:6px 10px;border-radius:8px;font-weight:600}
  .card{
    background: linear-gradient(180deg, #ffffff 0%, #f7fff7 100%);
    padding:18px;border-radius:10px;border:1px solid rgba(33,138,62,0.06);
    box-shadow: 0 6px 18px rgba(33,138,62,0.04);
  }
  .question{
    font-size:18px;
    color:#164a25;
    margin-bottom:12px;
    min-height:54px;
  }
  .options{display:grid;grid-template-columns:1fr;gap:10px}
  .option{
    padding:12px 14px;border-radius:10px;border:2px solid rgba(33,138,62,0.12);
    background:linear-gradient(180deg, #f8fff8, #ffffff);
    cursor:pointer;
    font-weight:600;
    transition:transform .08s ease, box-shadow .08s;
  }
  .option:hover{transform:translateY(-3px);box-shadow:0 6px 14px rgba(33,138,62,0.06)}
  .option.disabled{cursor:default;opacity:0.9;transform:none}
  .option.correct{background:linear-gradient(90deg,#e6f7ea,#dff5e4);border-color:rgba(46,139,87,0.35);color:var(--success)}
  .option.wrong{background:linear-gradient(90deg,#fff0f0,#ffecec);border-color:rgba(192,43,43,0.25);color:var(--danger)}
  .footer{
    margin-top:14px;display:flex;align-items:center;justify-content:space-between;gap:12px;
  }
  .progress{color:var(--muted);font-size:14px}
  .btn{
    background:var(--accent);color:white;padding:9px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer;
    box-shadow: 0 6px 12px rgba(33,138,62,0.12);
  }
  .center{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px;padding:28px}
  .big-msg{font-size:22px;color:var(--accent-dark);font-weight:800}
  .small-muted{color:var(--muted);font-size:14px}
  footer.note{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
  @media(max-width:600px){
    .container{padding:14px}
    .question{font-size:16px}
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Test: Uk≈Çad krwiono≈õny i limfatyczny</h1>
        <div class="meta">Pytania: ≈Çatwe ‚Üí ≈õrednie ‚Üí trudne. Powodzenia!</div>
      </div>
      <div class="status">
        <div class="hearts" id="hearts" aria-hidden="true">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div class="score" id="score">Punkty: 0</div>
      </div>
    </header>

    <main>
      <div class="card" id="gameCard">
        <div class="question" id="question">≈Åadowanie pyta≈Ñ‚Ä¶</div>
        <div class="options" id="options"></div>

        <div class="footer">
          <div class="progress" id="progress">0 / 0</div>
          <div class="meta small-muted" id="hint">Brak przycisk√≥w pomi≈Ñ / restart ‚Äî restart po zako≈Ñczeniu.</div>
        </div>
      </div>

      <div id="endScreen" class="card" style="display:none;margin-top:14px">
        <div class="center" id="endContent">
          <!-- dynamic -->
        </div>
      </div>
    </main>

    <footer class="note">Po b≈Çƒôdnej odpowiedzi: Twoja odpowied≈∫ czerwonym, poprawna zielonym ‚Äî 3 sekundy, potem nastƒôpne pytanie.</footer>
  </div>

<script>
/* Dane pyta≈Ñ ‚Äî nie zmieniaj strukturze: text, options array, correct index (index odnosi siƒô do options przed tasowaniem) */
const rawQuestions = {
  easy: [
    { text:"Jak nazywa siƒô p≈Çynna czƒô≈õƒá krwi zawierajƒÖca bia≈Çka i substancje od≈ºywcze?", options:["Limfa o sk≈Çadzie wodnym","Osocze z bia≈Çkami","Surowica pozbawiona kom√≥rek","Hemoglobina rozpuszczona"], correct:1 },
    { text:"Jakie elementy krwi biorƒÖ udzia≈Ç w procesie krzepniƒôcia?", options:["Leukocyty odporno≈õciowe","P≈Çytki krwi","Erytrocyty transportowe","Limfocyty T"], correct:1 },
    { text:"Jakie kom√≥rki krwi odpowiadajƒÖ za przenoszenie tlenu?", options:["Leukocyty broniƒÖce","Trombocyty krzepniƒôcia","Erytrocyty transportowe","Limfocyty B"], correct:2 },
    { text:"Jakie kom√≥rki krwi chroniƒÖ organizm przed infekcjami?", options:["Erytrocyty","Trombocyty","Leukocyty","Kom√≥rki miƒô≈õniowe"], correct:2 },
    { text:"Jak nazywajƒÖ siƒô leukocyty pozbawione ziarnisto≈õci?", options:["Granulocyty","Eozynofile","Agranulocyty","Bazofile"], correct:2 },
    { text:"Jakie kom√≥rki odporno≈õciowe walczƒÖ bezpo≈õrednio z patogenami?", options:["Neurony czuciowe","Granulocyty","Erytrocyty","Melanocyty"], correct:1 },
    { text:"Jakie kom√≥rki produkujƒÖ przeciwcia≈Ça?", options:["Limfocyty B","Limfocyty T","Makrofagi tkankowe","Neutrofile krwi"], correct:0 },
    { text:"Jakie naczynia odprowadzajƒÖ krew z serca do narzƒÖd√≥w?", options:["≈ªy≈Çy du≈ºe","Kapilary cienkie","Tƒôtnice grube","Zatoki ≈ºylne"], correct:2 },
    { text:"Najmniejsze naczynia krwiono≈õne, w kt√≥rych zachodzi wymiana substancji:", options:["≈ªy≈Çy g≈Ç√≥wne","Tƒôtniczki doprowadzajƒÖce","Naczynia w≈Çosowate","Zastawki ≈ºylne"], correct:2 },
    { text:"Jakie struktury serca zapobiegajƒÖ cofaniu siƒô krwi?", options:["Komory","Zastawki","Przegrody","Naczynia wie≈Ñcowe"], correct:1 },
    { text:"Jak nazywajƒÖ siƒô dwie g≈Ç√≥wne czƒô≈õci serca pompujƒÖce krew?", options:["Przedsionki","Komory","Zastawki","Osierdzie"], correct:1 },
    { text:"Jak nazywa siƒô obieg krwi prowadzƒÖcy z prawej komory do p≈Çuc i z powrotem?", options:["Obieg du≈ºy","Obieg wrotny","P≈Çucny obieg krwi","Obieg sk√≥rny"], correct:2 },
    { text:"Kt√≥ry zapis przedstawia prawid≈Çowy schemat krzepniƒôcia krwi?", options:["Fibrina ‚Üí Fibrynogen ‚Üí Skrzep","Skrzep ‚Üí Fibrynogen ‚Üí Fibrina","Fibrynogen ‚Üí Fibrina ‚Üí Skrzep","Fibrina ‚Üí Skrzep ‚Üí Fibrynogen"], correct:2 }
  ],
  medium: [
    { text:"Osocze to‚Ä¶", options:["P≈Çynna czƒô≈õƒá krwi zawierajƒÖca bia≈Çka i substancje od≈ºywcze","Kom√≥rki odpowiedzialne za transport tlenu","Elementy krwi uczestniczƒÖce w krzepniƒôciu","Najmniejsze naczynia krwiono≈õne organizmu"], correct:0 },
    { text:"P≈Çytki krwi to‚Ä¶", options:["Kom√≥rki transportujƒÖce tlen do tkanek","Elementy biorƒÖce udzia≈Ç w procesie krzepniƒôcia krwi","Kom√≥rki broniƒÖce organizm przed drobnoustrojami","Czƒô≈õci serca zapobiegajƒÖce cofaniu krwi"], correct:1 },
    { text:"Erytrocyty to‚Ä¶", options:["Kom√≥rki odporno≈õciowe produkujƒÖce przeciwcia≈Ça","Kom√≥rki transportujƒÖce tlen w organizmie","Naczynia odprowadzajƒÖce krew z serca","P≈Çynna czƒô≈õƒá krwi z bia≈Çkami"], correct:1 },
    { text:"Leukocyty to‚Ä¶", options:["Kom√≥rki odpowiedzialne za obronƒô przed infekcjami","Kom√≥rki przenoszƒÖce tlen we krwi","Elementy biorƒÖce udzia≈Ç w krzepniƒôciu","Najmniejsze naczynia krwiono≈õne"], correct:0 },
    { text:"Agranulocyty to‚Ä¶", options:["Leukocyty bez ziarnisto≈õci w cytoplazmie","Naczynia odprowadzajƒÖce krew z serca","Struktury zapobiegajƒÖce cofaniu siƒô krwi","Komory pompujƒÖce krew w sercu"], correct:0 },
    { text:"Granulocyty to‚Ä¶", options:["Kom√≥rki bezpo≈õrednio walczƒÖce z patogenami","P≈Çynna czƒô≈õƒá krwi pe≈ÇniƒÖca funkcjƒô transportowƒÖ","Naczynia cienko≈õcienne wymieniajƒÖce substancje","Kom√≥rki produkujƒÖce przeciwcia≈Ça"], correct:0 },
    { text:"Limfocyty B to‚Ä¶", options:["Kom√≥rki uk≈Çadu odporno≈õciowego wytwarzajƒÖce przeciwcia≈Ça","Kom√≥rki transportujƒÖce tlen w tkankach","Elementy krwi biorƒÖce udzia≈Ç w krzepniƒôciu","Struktury serca pompujƒÖce krew"], correct:0 },
    { text:"Tƒôtnice to‚Ä¶", options:["Naczynia odprowadzajƒÖce krew z serca do tkanek","Kom√≥rki zwalczajƒÖce patogeny","Najmniejsze naczynia wymieniajƒÖce substancje","Elementy krzepniƒôcia krwi"], correct:0 },
    { text:"Naczynia w≈Çosowate to‚Ä¶", options:["Najmniejsze naczynia, w kt√≥rych zachodzi wymiana substancji","Struktury serca zapobiegajƒÖce cofaniu siƒô krwi","Naczynia prowadzƒÖce krew do serca","Komory serca pompujƒÖce krew"], correct:0 },
    { text:"Zastawki to‚Ä¶", options:["Struktury serca zapobiegajƒÖce cofaniu siƒô krwi","Kom√≥rki uk≈Çadu odporno≈õciowego","Najmniejsze naczynia krwiono≈õne","Elementy krwi biorƒÖce udzia≈Ç w krzepniƒôciu"], correct:0 },
    { text:"Komory serca to‚Ä¶", options:["G≈Ç√≥wne czƒô≈õci serca pompujƒÖce krew do p≈Çuc i reszty cia≈Ça","Struktury wymieniajƒÖce substancje","Organy filtrujƒÖce krew","Elementy krwi transportujƒÖce tlen"], correct:0 },
    { text:"P≈Çucny obieg krwi to‚Ä¶", options:["Droga krwi z prawej komory do p≈Çuc i z powrotem do lewego przedsionka","Wymiana tlenu w naczy≈Ñkach w≈Çosowatych","KrƒÖ≈ºenie krwi w ca≈Çym organizmie","Transport krwi przez zastawki"], correct:0 },
    { text:"‚ÄûFibrynogen ‚Üí Fibrina ‚Üí Skrzep‚Äù to‚Ä¶", options:["Schemat procesu krzepniƒôcia krwi","Opis dzia≈Çania kom√≥r odporno≈õciowych","Kolejno≈õƒá etap√≥w wymiany gazowej","Nazwy tkanek uk≈Çadu limfatycznego"], correct:0 }
  ],
  hard: [
    { text:"Kt√≥ra odpowied≈∫ opisuje funkcjƒô transportowƒÖ uk≈Çadu krwiono≈õnego?", options:["Przenoszenie substancji","Wytwarzanie limfocyt√≥w","Zatrzymywanie patogen√≥w","Produkcja hormon√≥w"], correct:0 },
    { text:"Kt√≥ra odpowied≈∫ opisuje funkcjƒô utrzymywania sta≈Çych parametr√≥w organizmu?", options:["Ogrzewanie miƒô≈õni","Utrzymanie homeostazy","Transport d≈∫wiƒôku","Tworzenie w≈Ç√≥kien kolagenu"], correct:1 },
    { text:"Kt√≥ra odpowied≈∫ opisuje funkcjƒô ochronnƒÖ krwi?", options:["Magazynowanie witamin","Ochrona przed infekcjami","Wytwarzanie melaniny","Transport impuls√≥w"], correct:1 },
    { text:"Kt√≥ra odpowied≈∫ opisuje ochronƒô przed drobnoustrojami?", options:["Oczyszczanie wƒÖtroby","Obrona przed patogenami","Regeneracja erytrocyt√≥w","Produkcja enzym√≥w"], correct:1 },
    { text:"Co jest funkcjƒÖ limfy w zakresie transportu?", options:["Wymiana dwutlenku wƒôgla","Transport t≈Çuszcz√≥w do krwi","Produkcja hormon√≥w tarczycy","Wytwarzanie hemoglobiny"], correct:1 },
    { text:"Kt√≥ra odpowied≈∫ opisuje regulacjƒô p≈Çyn√≥w ustrojowych przez uk≈Çad limfatyczny?", options:["Utrzymanie ci≈õnienia osmotycznego","Zatrzymywanie potu","Regeneracja nab≈Çonka","Odbudowa w≈Ç√≥kien miƒô≈õni"], correct:0 },
    { text:"Kt√≥ry narzƒÖd filtruje limfƒô i zatrzymuje drobnoustroje?", options:["Wƒôz≈Çy ch≈Çonne","Zastawki serca","Przysadka m√≥zgowa","Nadnercza"], correct:0 },
    { text:"Kt√≥ry narzƒÖd usuwa stare erytrocyty i chroni przed infekcjami?", options:["≈ªo≈ÇƒÖdek","≈öledziona","Trzustka","Tarczyca"], correct:1 },
    { text:"Kt√≥ry narzƒÖd odpowiada za dojrzewanie limfocyt√≥w T?", options:["WƒÖtroba","Grasica","Jelito cienkie","Sk√≥ra w≈Ça≈õciwa"], correct:1 },
    { text:"Kt√≥re struktury limfatyczne znajdujƒÖ siƒô w gardle i chroniƒÖ przed drobnoustrojami?", options:["Grudki ch≈Çonne","Jelita d≈Çugie","Migda≈Çki podniebienne","Zastawki ≈ºylne"], correct:2 },
    { text:"Kt√≥re skupiska tkanki limfatycznej wystƒôpujƒÖ w r√≥≈ºnych czƒô≈õciach cia≈Ça?", options:["Grudki limfatyczne","P≈Çaty wƒÖtrobowe","Zwoje nerwowe","Torebki p≈Çucne"], correct:0 },
    { text:"Kt√≥ry narzƒÖd wytwarza elementy krwi i kom√≥rki odporno≈õciowe?", options:["Trzustka","Szpik kostny","Nadnercza","M√≥zgowie"], correct:1 }
  ]
};

/* Helper functions */
function shuffle(array){
  // Fisher-Yates
  for(let i = array.length -1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

/* Game state */
let questions = []; // po≈ÇƒÖczone: easy (tasowane) -> medium -> hard
let currentIndex = 0;
let lives = 3;
let score = 0;
let busy = false;

/* Elements */
const qEl = document.getElementById('question');
const optsEl = document.getElementById('options');
const heartsEl = document.getElementById('hearts');
const scoreEl = document.getElementById('score');
const progressEl = document.getElementById('progress');
const gameCard = document.getElementById('gameCard');
const endScreen = document.getElementById('endScreen');
const endContent = document.getElementById('endContent');

function initGame(){
  // Reset state
  currentIndex = 0;
  lives = 3;
  score = 0;
  busy = false;
  updateHearts();
  updateScore();
  endScreen.style.display = 'none';
  gameCard.style.display = 'block';

  // Prepare questions: shuffle each difficulty group separately, then concatenate
  const easy = shuffle(JSON.parse(JSON.stringify(rawQuestions.easy)));
  const medium = shuffle(JSON.parse(JSON.stringify(rawQuestions.medium)));
  const hard = shuffle(JSON.parse(JSON.stringify(rawQuestions.hard)));
  questions = [...easy, ...medium, ...hard];

  // For variety across attempts also shuffle the three groups order? 
  // User explicitly wanted easy ‚Üí medium ‚Üí hard, so keep that order.
  // Update progress total
  progressEl.textContent = `0 / ${questions.length}`;
  showQuestion();
}

function updateHearts(){
  heartsEl.textContent = '‚ù§Ô∏è'.repeat(lives) + 'üñ§'.repeat(Math.max(0, 3-lives));
}

function updateScore(){
  scoreEl.textContent = `Punkty: ${score}`;
}

function showQuestion(){
  if(currentIndex >= questions.length){
    finishGame();
    return;
  }
  const q = questions[currentIndex];
  qEl.textContent = q.text;

  // Build options with correct flag and shuffle them
  const opts = q.options.map((text, idx) => ({ text, isCorrect: idx === q.correct }));
  shuffle(opts);

  // Clear options
  optsEl.innerHTML = '';
  opts.forEach((o, idx) => {
    const btn = document.createElement('button');
    btn.className = 'option';
    btn.type = 'button';
    btn.innerText = `${String.fromCharCode(97+idx)}) ${o.text}`;
    btn.disabled = false;
    btn.onclick = () => selectAnswer(btn, o);
    optsEl.appendChild(btn);
  });

  progressEl.textContent = `${currentIndex+1} / ${questions.length}`;
}

function selectAnswer(btn, option){
  if(busy) return;
  busy = true;

  // disable all options
  const allBtns = Array.from(optsEl.querySelectorAll('button'));
  allBtns.forEach(b => { b.classList.add('disabled'); b.disabled = true; });

  if(option.isCorrect){
    // mark as correct and immediately go to next question
    btn.classList.add('correct');
    score += 1;
    updateScore();
    // immediate next question (no waiting per spec)
    currentIndex++;
    // small timeout to allow CSS to show (practically immediate)
    setTimeout(() => { busy = false; showQuestion(); }, 150);
  } else {
    // wrong: show chosen red and show which is correct green, wait 3s then next (unless lives==0)
    btn.classList.add('wrong');
    // find correct button
    const allBtns = Array.from(optsEl.querySelectorAll('button'));
    allBtns.forEach(b=>{
      if(b !== btn){
        const text = b.innerText.replace(/^[a-d]\)\s*/,'');
        // compare by text to find correct one
        if(text === getCorrectTextForCurrentQuestion()){
          b.classList.add('correct');
        }
      }
    });

    lives -= 1;
    updateHearts();

    setTimeout(() => {
      if(lives <= 0){
        // Game over
        showEnd(false);
      } else {
        currentIndex++;
        busy = false;
        showQuestion();
      }
    }, 3000);
  }
}

function getCorrectTextForCurrentQuestion(){
  const q = questions[currentIndex];
  return q.options[q.correct];
}

function finishGame(){
  // Player answered wszystkie pytania
  if(lives === 3){
    // perfect
    showEnd(true, true);
  } else if(lives >= 1){
    showEnd(true, false); // won but used lives
  } else {
    // lives 0; likely handled earlier, but fallback
    showEnd(false);
  }
}

function showEnd(won, perfect=false){
  gameCard.style.display = 'none';
  endScreen.style.display = 'block';
  endContent.innerHTML = '';

  if(won){
    if(perfect){
      const msg = document.createElement('div');
      msg.className = 'big-msg';
      msg.textContent = 'Wygra≈Çe≈õ ‚Äî wykona≈Çe≈õ ten test bezb≈Çƒôdnie!';
      endContent.appendChild(msg);
    } else {
      const msg = document.createElement('div');
      msg.className = 'big-msg';
      msg.textContent = 'Brawo ‚Äî wygra≈Çe≈õ!';
      endContent.appendChild(msg);
    }
    const sub = document.createElement('div');
    sub.className = 'small-muted';
    sub.textContent = `Punkty: ${score} / ${questions.length}  ‚Ä¢  Pozosta≈Çe ≈ºycia: ${lives}`;
    endContent.appendChild(sub);
  } else {
    const msg = document.createElement('div');
    msg.className = 'big-msg';
    msg.style.color = 'var(--danger)';
    msg.textContent = 'Przegra≈Çe≈õ';
    endContent.appendChild(msg);

    const sub = document.createElement('div');
    sub.className = 'small-muted';
    sub.textContent = `Punkty: ${score} / ${questions.length}`;
    endContent.appendChild(sub);
  }

  const btn = document.createElement('button');
  btn.className = 'btn';
  btn.textContent = 'Nowa gra';
  btn.onclick = () => {
    initGame();
    window.scrollTo({top:0,behavior:'smooth'});
  };
  endContent.appendChild(btn);
}

/* Start */
initGame();
</script>
</body>
</html>
