<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Daty</title>
<script src="script.js"></script>
<style>
:root {
    --bg: #f4f6f8;
    --card: #ffffff;
    --text: #1f2933;
    --muted: #6b7280;
    --primary: #2563eb;
    --danger: #dc2626;
    --radius: 14px;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    background: var(--bg);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 16px;
}

.game-container {
    width: 100%;
    max-width: 420px;
    background: var(--card);
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

/* TOP BAR */
.top-bar {
    display: flex;
    justify-content: space-between;
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 16px;
}

.top-bar span {
    font-weight: 700;
}

/* EVENT */
.event {
    font-size: 18px;
    font-weight: 600;
    line-height: 1.4;
    text-align: center;
    margin-bottom: 20px;
    min-height: 60px;
}

/* INPUT */
input {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    border-radius: var(--radius);
    border: 2px solid #e5e7eb;
    text-align: center;
    outline: none;
}

input:focus {
    border-color: var(--primary);
}

/* CORRECT ANSWER */
.correct-answer {
    margin-top: 12px;
    padding: 10px;
    border-radius: var(--radius);
    background: #fee2e2;
    color: var(--danger);
    font-weight: 600;
    text-align: center;
}

/* END SCREEN */
.end-screen h2 {
    margin-top: 0;
    margin-bottom: 16px;
}

.end-screen p {
    font-size: 18px;
    margin: 8px 0;
}

/* BUTTONS */
button {
    width: 100%;
    padding: 14px;
    margin-top: 12px;
    font-size: 16px;
    font-weight: 600;
    border-radius: var(--radius);
    border: none;
    cursor: pointer;
    background: var(--primary);
    color: white;
}

button:active {
    transform: scale(0.98);
}

/* UTILS */
.hidden {
    display: none;
}
/* =========================
   MOBILE STYLE (TELEFONY)
   ========================= */

@media (max-width: 600px) {

    body {
        padding: 10px;
        align-items: flex-start;
    }

    .game-container {
        max-width: 100%;
        border-radius: 0;
        min-height: 100vh;
        box-shadow: none;
        padding: 16px;
    }

    .top-bar {
        font-size: 18px;
        margin-bottom: 20px;
    }

    .event {
        font-size: 20px;
        margin-bottom: 24px;
        min-height: auto;
    }

    input {
        font-size: 20px;
        padding: 16px;
    }

    .correct-answer {
        font-size: 16px;
        padding: 12px;
    }

    .end-screen h2 {
        font-size: 26px;
    }

    .end-screen p {
        font-size: 20px;
    }

    button {
        font-size: 18px;
        padding: 16px;
    }
}
</style>
</head>
<body>

<div class="game-container">

    <!-- GRA -->
    <div id="game">
        <div class="top-bar">
            <div>Życia: <span id="lives">10</span></div>
            <div>Punkty: <span id="points">0</span></div>
        </div>

        <div class="event" id="eventText"></div>

        <input type="text" id="answerInput" placeholder="Wpisz datę">
        <div class="correct-answer hidden" id="correctAnswer"></div>
    </div>

    <!-- KONIEC GRY -->
    <div id="endScreen" class="end-screen hidden">
        <h2>Koniec Gry</h2>
        <p>Punkty: <strong id="finalScore"></strong></p>
        <p>Rekord: <strong id="record"></strong></p>
        <button onclick="startGame()">Nowa Gra</button>
        <button onclick="window.location.href='https://dawid108.github.io/dawi2026/index.html'">
            Zagraj w Grę
        </button>
    </div>

</div>

<script>
const data = [
"776 p.n.e. - Pierwsze Starożytne Igrzyska Olimpijskie",
"753 p.n.e. - Założenie Rzymu",
"476 - Upadek Cesarstwa Rzymskiego Zachodniego",
"966 - Chrzest Polski",
"997 - Śmierć Św. Wojciecha",
"1000 - Zjazd w Gnieźnie",
"1025 - Koronacja Bolesława Chrobrego",
"1054 - Wielka Schizma Wschodnia",
"1226 - Sprowadzenie Krzyża do Polski",
"1364 - Utworzenie Akademia Krakowskiej",
"1385 - Umowa z Litwą",
"1386 - Unia z Litwą w Krewie",
"1409-1411 - Wielka Wojna z Krzyżakami",
"15.07.1410 - Bitwa Pod Grunwaldem",
"1411 - Pierwszy Pokój Toruński",
"1450 - Wynalezienie Druku przez Jana Gutenberga",
"1453 - Zdobycie Konstantynopola przez Turków",
"1492 - Odkrycie Ameryki przez Krzysztofa Kolumba",
"1498 - Vasco da Gama dotarł drogą morską do Indii",
"1517 - Wystąpienie Marcina Lutra",
"1519-1522 - Wyprawa Ferdynanda Magellana",
"1569 - Unia Lubelska z Litwą",
"1621 - Bitwa pod Chocimiem",
"1655-1660 - Potop Szwedzki",
"1683 - Bitwa pod Wiedniem",
"1744 - Powstanie Kościuszkowskie",
"1772 - Pierwszy Rozbiór Polski",
"1792 - Drugi Rozbiór Polski",
"1795 - Trzeci Rozbiór Polski",
"1918 - Odzyskanie Niepodległości przez Polskę",
"27.12.1918 - Wybuch Powstania Wielkopolskiego",
"1.09.1939 - Rozpoczęcie Drugiej Wojny Światowej"
];

let shuffled = [];
let index = 0;
let lives = 10;
let points = 0;
let canGetPoint = true;

const eventText = document.getElementById("eventText");
const input = document.getElementById("answerInput");
const correctAnswerDiv = document.getElementById("correctAnswer");

input.addEventListener("keydown", e => {
    if (e.key === "Enter") checkAnswer();
});

function startGame() {
    shuffled = [...data].sort(() => Math.random() - 0.5);
    index = 0;
    lives = 10;
    points = 0;
    canGetPoint = true;

    document.getElementById("lives").textContent = lives;
    document.getElementById("points").textContent = points;

    document.getElementById("game").classList.remove("hidden");
    document.getElementById("endScreen").classList.add("hidden");

    loadEvent();
}

function loadEvent() {
    if (index >= shuffled.length || lives <= 0) {
        endGame();
        return;
    }

    const [, description] = shuffled[index].split(" - ");
    eventText.textContent = description;
    input.value = "";
    input.focus();
    canGetPoint = true;
}

function checkAnswer() {
    const correctDate = shuffled[index].split(" - ")[0].trim();
    const userAnswer = input.value.trim();

    if (userAnswer === correctDate) {
        if (canGetPoint) {
            points++;
            document.getElementById("points").textContent = points;
        }
        index++;
        loadEvent();
    } else {
        lives--;
        document.getElementById("lives").textContent = lives;
        canGetPoint = false;
        showCorrect(correctDate);
    }
}

function showCorrect(date) {
    correctAnswerDiv.textContent = "Poprawna data: " + date;
    correctAnswerDiv.classList.remove("hidden");

    setTimeout(() => {
        correctAnswerDiv.classList.add("hidden");
        input.value = "";
        input.focus();
    }, 5000);

    if (lives <= 0) endGame();
}

function endGame() {
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");

    document.getElementById("finalScore").textContent = points;

    let record = localStorage.getItem("historyRecord") || 0;
    if (points > record) {
        record = points;
        localStorage.setItem("historyRecord", record);
    }
    document.getElementById("record").textContent = record;
}

startGame();

if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./20260106_sw.js');
}
</script>

</body>
</html>