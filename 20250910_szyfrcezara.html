<!DOCTYPE html><html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Szyfr Cezara — prosty enkoder</title>
  <style>
    :root{--bg:#f6f8fa;--card:#ffffff;--accent:#2b7a78;--muted:#6b6b6b;--radius:12px}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{margin:0;background:linear-gradient(180deg,#eef7f6 0%,var(--bg) 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{background:var(--card);width:100%;max-width:820px;border-radius:var(--radius);box-shadow:0 8px 30px rgba(8,20,30,0.06);padding:22px}
    h1{margin:0 0 6px;font-size:20px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .col{flex:1 1 220px;min-width:220px}
    label{display:block;font-size:13px;color:#223; margin-bottom:8px}
    textarea, input[type="number"], input[type="text"]{width:100%;padding:10px;border-radius:10px;border:1px solid #e6e9eb;font-size:14px}
    textarea{min-height:120px;resize:vertical}
    .controls{display:flex;gap:10px;margin-top:10px}
    button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}
    button.secondary{background:#f3f4f6;color:#222;border:1px solid #e6e9eb}
    .output{margin-top:14px}
    .hint{font-size:13px;color:var(--muted);margin-top:8px}
    footer{margin-top:14px;font-size:13px;color:var(--muted)}
    @media (max-width:600px){.col{min-width:100%}}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Szyfr Cezara</h1>
    <p class="lead">Wprowadź tekst, wybierz przesunięcie (np. 3) i kliknij <strong>Zaszyfruj</strong>. Spacje zostaną pozostawione bez zmian, układ wyrazów zachowany.</p><div class="row">
  <div class="col">
    <label for="inputText">Tekst wejściowy</label>
    <textarea id="inputText" placeholder="Wpisz tekst tutaj...">Przykład: ala ma kota</textarea>
  </div>

  <div style="width:160px;display:flex;flex-direction:column;gap:8px;">
    <div>
      <label for="shift">Przesunięcie (0–25)</label>
      <input id="shift" type="number" min="0" max="1000" value="3" />
    </div>

    <div style="margin-top:auto;display:flex;flex-direction:column;gap:8px;">
      <button id="encodeBtn">Zaszyfruj →</button>
      <button id="decodeBtn" class="secondary">← Odszyfruj</button>
    </div>
  </div>
</div>

<div class="output">
  <label for="result">Wynik</label>
  <textarea id="result" readonly placeholder="Tutaj pojawi się wynik..."></textarea>

  <div class="controls">
    <button id="copyBtn" class="secondary">Kopiuj</button>
    <button id="clearBtn" class="secondary">Wyczyść</button>
  </div>

  <p class="hint">Uwagi: tylko litery alfabetu (A–Z, a–z) są szyfrowane. Spacje i inne znaki (np. cyfry, przecinki) zostają bez zmian. Przesunięcie większe niż 25 zostanie zredukowane modulo 26.</p>
</div>

<footer>Autor: Twój asystent — prosty demonstrator szyfru Cezara</footer>

  </main>  <script>
    // Pobieramy elementy DOM
    const inputText = document.getElementById('inputText');
    const shiftInput = document.getElementById('shift');
    const resultArea = document.getElementById('result');
    const encodeBtn = document.getElementById('encodeBtn');
    const decodeBtn = document.getElementById('decodeBtn');
    const copyBtn = document.getElementById('copyBtn');
    const clearBtn = document.getElementById('clearBtn');

    // Funkcja przesuwająca jeden znak (tylko litery) o podaną wartość forward (może być ujemna)
    function shiftChar(ch, shift) {
      const A_CODE = 'A'.charCodeAt(0); // 65
      const Z_CODE = 'Z'.charCodeAt(0); // 90
      const a_CODE = 'a'.charCodeAt(0); // 97
      const z_CODE = 'z'.charCodeAt(0); // 122

      const code = ch.charCodeAt(0);

      // Jeśli to wielka litera
      if (code >= A_CODE && code <= Z_CODE) {
        // Obliczamy nowe przesunięcie z wrap-aroundem za pomocą modulo 26
        const offset = (code - A_CODE + shift) % 26;
        // W JS modulo dla liczb ujemnych może być ujemne — normalizujemy
        const norm = (offset + 26) % 26;
        return String.fromCharCode(A_CODE + norm);
      }

      // Jeśli to mała litera
      if (code >= a_CODE && code <= z_CODE) {
        const offset = (code - a_CODE + shift) % 26;
        const norm = (offset + 26) % 26;
        return String.fromCharCode(a_CODE + norm);
      }

      // Inne znaki — zwracamy bez zmian (spacje, cyfry, interpunkcja)
      return ch;
    }

    // Funkcja szyfrująca cały tekst
    function caesar(text, shift) {
      // Upewniamy się, że shift jest liczbą całkowitą i redukujemy go do zakresu 0-25
      const s = Math.floor(Number(shift) || 0);
      const effectiveShift = ((s % 26) + 26) % 26; // normalizacja

      // Tworzymy wynik przesuwając każdy znak
      let out = '';
      for (let i = 0; i < text.length; i++) {
        out += shiftChar(text[i], effectiveShift);
      }
      return out;
    }

    // Obsługa przycisku Zaszyfruj
    encodeBtn.addEventListener('click', () => {
      const plain = inputText.value;
      const sh = shiftInput.value;
      const cipher = caesar(plain, sh);
      resultArea.value = cipher;
    });

    // Obsługa przycisku Odszyfruj (przesuwamy w lewo czyli o -shift)
    decodeBtn.addEventListener('click', () => {
      const cipher = inputText.value;
      const sh = shiftInput.value;
      // Odszyfrowanie = przesunięcie o -shift
      const plain = caesar(cipher, -Number(sh));
      resultArea.value = plain;
    });

    // Kopiowanie wyniku do schowka
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(resultArea.value);
        copyBtn.textContent = 'Skopiowano!';
        setTimeout(() => (copyBtn.textContent = 'Kopiuj'), 1200);
      } catch (e) {
        // Fallback: zaznacz pole i pokaż komunikat
        resultArea.select();
        document.execCommand('copy');
        copyBtn.textContent = 'Skopiowano!';
        setTimeout(() => (copyBtn.textContent = 'Kopiuj'), 1200);
      }
    });

    // Wyczyść pola
    clearBtn.addEventListener('click', () => {
      inputText.value = '';
      resultArea.value = '';
    });

    // Mały dodatek: reaguj na Ctrl+Enter — zaszyfruj
    inputText.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === 'Enter') {
        encodeBtn.click();
      }
    });
  </script></body>
</html>