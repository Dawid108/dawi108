<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Język Angielski</title>
<script src="script.js"></script>
<link rel="icon" href="dawi108.png" type="image/png">
<style>
body{
background:#0d102b;
color:white;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}
#game, #endScreen{
width:90%; max-width:500px;
background:#13173d;
padding:20px;
border-radius:20px;
text-align:center;
box-shadow:0 0 20px #0006;
}
.category{font-size:18px;margin-bottom:10px;color:#7dd7ff;}
.question{font-size:20px;margin-bottom:20px;}
.btn{background:#1c2257;padding:12px;border-radius:10px;margin:10px 0;cursor:pointer;transition:.2s;}
.btn:hover{background:#27307a;}
.correct{background:#1fa84f !important;}
.wrong{background:#c62828 !important;}
#stats{display:flex;justify-content:space-between;margin-bottom:20px;color:#9bbcff;}
#counter{margin-top:10px;color:#9bbcff;}
.hidden{display:none;}
#endScreen button{margin-top:15px;background:#6f85ff;padding:10px 20px;border:none;border-radius:10px;color:white;font-size:18px;cursor:pointer;}
</style>
</head>
<body>

<div id="game">
    <div id="stats">
        <div>Życia: <span id="life">3</span></div>
        <div>Punkty: <span id="score">0</span></div>
    </div>
    <div class="category" id="category"></div>
    <div class="question" id="question"></div>
    <div id="answers"></div>
    <div id="counter"></div>
</div>

<div id="endScreen" class="hidden">
    <h2 id="endTitle"></h2>
    <p>Twój wynik: <span id="finalScore"></span></p>
    <p>Twój rekord: <span id="record"></span></p>
    <p>Suma punktów: <span id="dawid108"></span></p>
    <button onclick="newGame()">Nowa Gra</button>
</div>

<script>
// PYTANIA
let questions = [
{cat:"Body and mind", q:"treatment", a:"leczenie", b:"strzelanie", c:"pisanie", d:"czytanie"},
{cat:"Body and mind", q:"can't have changed", a:"nie mogłem zmienić", b:"muszę zmienić", c:"przegapić zmianę", d:"zmienić telefon"},
{cat:"Body and mind", q:"dislocated", a:"wybił", b:"złamał", c:"skręcił", d:"rozciął"},
{cat:"Body and mind", q:"didn't go on strike", a:"nie strajkowali", b:"nie pracowali", c:"nie protestowali", d:"nie głosowali"},
{cat:"Body and mind", q:"expectations", a:"oczekiwań", b:"wymagań", c:"marzeń", d:"planów"},
{cat:"Body and mind", q:"If I were you", a:"Na twoim miejscu", b:"Bez twojej zgody", c:"Z mojego punktu", d:"Po twojej stronie"},
{cat:"Body and mind", q:"liver", a:"wątroba", b:"nerka", c:"trzustka", d:"śledziona"},
{cat:"Body and mind", q:"could have had an argument", a:"pokłócili się", b:"porozmawiali", c:"dogadali się", d:"spotkali się"},
{cat:"Body and mind", q:"Therefore", a:"Dlatego", b:"Jednak", c:"Ponieważ", d:"Chociaż"},
{cat:"Body and mind", q:"make", a:"umówić się na", b:"zdecydować się na", c:"zrezygnować z", d:"zastanowić się"},
{cat:"Body and mind", q:"dissatisfaction", a:"niezadowolenie", b:"zadowolenie", c:"cierpliwość", d:"satysfakcja"},
{cat:"Body and mind", q:"medical care", a:"opieka medyczna", b:"pomoc domowa", c:"opieka prawna", d:"usługa zdrowia"},
{cat:"Body and mind", q:"appointment", a:"wizyta", b:"spotkanie", c:"zaproszenie", d:"terminarz"},
{cat:"Body and mind", q:"ice rink", a:"lodowisko", b:"basen", c:"boisko", d:"hala sportowa"},
{cat:"Body and mind", q:"skate", a:"łyżwa", b:"but", c:"deska", d:"kask"},
{cat:"Body and mind", q:"thigh", a:"udo", b:"łydka", c:"kolano", d:"biodro"},
{cat:"Body and mind", q:"bleeding", a:"krwawienie", b:"oparzenie", c:"obrzęk", d:"ból"},
{cat:"Body and mind", q:"stitches", a:"szwy", b:"opatrunki", c:"zastrzyki", d:"plastry"},
{cat:"Body and mind", q:"hospital", a:"szpital", b:"apteka", c:"klinika", d:"przychodnia"},
{cat:"Body and mind", q:"dressing", a:"opatrunek", b:"bandaż", c:"maść", d:"lek"},
{cat:"Body and mind", q:"wound", a:"rana", b:"siniak", c:"zadrapanie", d:"blizna"},
{cat:"Body and mind", q:"heal", a:"goić się", b:"boleć", c:"puchnąć", d:"krwawić"},
{cat:"Body and mind", q:"recommendations", a:"rekomendacje", b:"skargi", c:"instrukcje", d:"pytania"},
{cat:"Body and mind", q:"foreign", a:"zagraniczny", b:"lokalny", c:"krajowy", d:"prywatny"},
{cat:"Body and mind", q:"patients", a:"pacjenci", b:"lekarze", c:"pielęgniarki", d:"ratownicy"},
{cat:"Body and mind", q:"treatment", a:"leczenie", b:"badanie", c:"diagnoza", d:"rehabilitacja"},
{cat:"Body and mind", q:"suggestion", a:"sugestia", b:"odmowa", c:"decyzja", d:"problem"},
{cat:"Body and mind", q:"language support", a:"wsparcie językowe", b:"pomoc techniczna", c:"opieka prawna", d:"tłumaczenie pisemne"},
{cat:"Body and mind", q:"recommend", a:"zalecać", b:"zakazywać", c:"unikać", d:"odmawiać"},
{cat:"Body and mind", q:"staff", a:"personel", b:"pacjenci", c:"klienci", d:"kadra"},
{cat:"Body and mind", q:"patient (adj.)", a:"cierpliwy", b:"nerwowy", c:"szybki", d:"zmęczony"},
{cat:"Body and mind", q:"helpful", a:"pomocny", b:"obojętny", c:"surowy", d:"nieobecny"},
{cat:"Body and mind", q:"take steps", a:"podjąć kroki", b:"zrobić przerwę", c:"zmienić zdanie", d:"cofnąć decyzję"},
{cat:"Body and mind", q:"resolve", a:"rozwiązać", b:"pogorszyć", c:"odłożyć", d:"zignorować"},
{cat:"Body and mind", q:"problems", a:"problemy", b:"wyniki", c:"zasady", d:"pytania"},
{cat:"Body and mind", q:"future", a:"przyszłość", b:"teraźniejszość", c:"przeszłość", d:"moment"},
{cat:"Body and mind", q:"look forward to", a:"z niecierpliwością czekać", b:"unikać", c:"odkładać", d:"zapominać"},
{cat:"Body and mind", q:"hearing from you", a:"otrzymanie odpowiedzi", b:"spotkanie osobiste", c:"rozmowa telefoniczna", d:"wysłanie listu"},
{cat:"Body and mind", q:"quality", a:"jakość", b:"ilość", c:"cena", d:"poziom"}
];

let current = 0;
let life = 3;
let score = 0;
let used = [];
let maxQ = questions.length;
let record = localStorage.getItem("szkola") || 0;
let dawid108 = localStorage.getItem("dawid108") || 0;

function newGame(){
    life = 3; score = 0; used = [];
    document.getElementById("endScreen").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    updateStats();
    nextQuestion();
}

function updateStats(){
    document.getElementById("life").innerText = life;
    document.getElementById("score").innerText = score;
}

function nextQuestion(){
    if(used.length === maxQ){ return win(); }

    let id;
    do{ id = Math.floor(Math.random()*maxQ); }
    while(used.includes(id));

    used.push(id);
    current = questions[id];

    document.getElementById("category").innerText = current.cat;
    document.getElementById("question").innerText = current.q;
    speakEnglish(current.q);


    document.getElementById("counter").innerText = "Pytanie " + used.length + " / " + maxQ;

    // Mieszanie odpowiedzi
    let arr = [
        {txt: current.a, correct: true},
        {txt: current.b, correct: false},
        {txt: current.c, correct: false},
        {txt: current.d, correct: false}
    ];
    arr.sort(()=>Math.random()-0.5);

    let ansDiv = document.getElementById("answers");
    ansDiv.innerHTML = "";

    arr.forEach(a=>{
        let btn = document.createElement("div");
        btn.classList.add("btn");
        btn.innerText = a.txt;
        btn.onclick = ()=>answer(a.correct, btn);
        ansDiv.appendChild(btn);
    });
}

function speakEnglish(text){
    if(!('speechSynthesis' in window)) return;

    speechSynthesis.cancel(); // zatrzymaj poprzednie czytanie

    let utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";      // angielska wymowa
    utter.rate = 0.9;          // tempo (0.8–1 jest OK)
    utter.pitch = 1;           // ton

    speechSynthesis.speak(utter);
}

function answer(correct, btn){
    let buttons = document.querySelectorAll(".btn");
    buttons.forEach(b=>b.style.pointerEvents="none");

    if(correct){
        btn.classList.add("correct");
        score++;
        dawid108++;
        localStorage.setItem("dawid108", dawid108);
        console.log("dawid108:", dawid108);
        updateStats();
        setTimeout(()=>nextQuestion(), 1500);
    }else{
        btn.classList.add("wrong");
        // pokaż poprawną
        buttons.forEach(b=>{
            if(b.innerText === current.a) b.classList.add("correct");
        });
        life--;
        updateStats();
        if(life <= 0){ setTimeout(()=>gameOver(), 6000); }
        else{ setTimeout(()=>nextQuestion(), 5000); }
    }
}

function win(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");
    document.getElementById("endTitle").innerText = "Wygrałeś!";
    endScreen();
}

function gameOver(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");
    document.getElementById("endTitle").innerText = "Koniec gry";
    endScreen();
}

function endScreen(){
    document.getElementById("finalScore").innerText = score;

    if(score > record){
        record = score;
        localStorage.setItem("szkola", record);
    }

    document.getElementById("record").innerText = record;
    document.getElementById("dawid108").innerText = dawid108;
}

newGame();
</script>
</body>
</html>
