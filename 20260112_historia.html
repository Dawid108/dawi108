<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Historia z Powtórki</title>
<script src="script.js"></script>
<link rel="icon" href="dawi108.png" type="image/png">
<style>
body{
background:#0d102b;
color:white;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}
#game, #endScreen{
width:90%; max-width:500px;
background:#13173d;
padding:20px;
border-radius:20px;
text-align:center;
box-shadow:0 0 20px #0006;
}
.category{font-size:18px;margin-bottom:10px;color:#7dd7ff;}
.question{font-size:20px;margin-bottom:20px;}
.btn{background:#1c2257;padding:12px;border-radius:10px;margin:10px 0;cursor:pointer;transition:.2s;}
.btn:hover{background:#27307a;}
.correct{background:#1fa84f !important;}
.wrong{background:#c62828 !important;}
#stats{display:flex;justify-content:space-between;margin-bottom:20px;color:#9bbcff;}
#counter{margin-top:10px;color:#9bbcff;}
.hidden{display:none;}
#endScreen button{margin-top:15px;background:#6f85ff;padding:10px 20px;border:none;border-radius:10px;color:white;font-size:18px;cursor:pointer;}
</style>
</head>
<body>

<div id="game">
    <div id="stats">
        <div>Życia: <span id="life">10</span></div>
        <div>Punkty: <span id="score">0</span></div>
    </div>
    <div class="category" id="category"></div>
    <div class="question" id="question"></div>
    <div id="answers"></div>
    <div id="counter"></div>
</div>

<div id="endScreen" class="hidden">
    <h2 id="endTitle"></h2>
    <p>Twój wynik: <span id="finalScore"></span></p>
    <p>Twój rekord: <span id="record"></span></p>
    <p>Suma punktów: <span id="dawid108"></span></p>
    <button onclick="newGame()">Nowa Gra</button>
</div>

<script>
// PYTANIA
let questions = [
  {cat:"Historia", q:"Kim był Michał Drzymała?", 
   a:"Chłopem, symbolem oporu wobec germanizacji", 
   b:"Dowódcą powstania styczniowego", 
   c:"Polskim poetą romantycznym", 
   d:"Ministrem w rządzie carskim"},

  {cat:"Historia", q:"Jakie stronnictwa działały przed powstaniem styczniowym?", 
   a:"Biali i czerwoni", 
   b:"Narodowcy i socjaliści", 
   c:"Demokraci i liberałowie", 
   d:"Chłopi i ziemianie"},

  {cat:"Historia", q:"Kto był przywódcą ruchu narodowego?", 
   a:"Roman Dmowski", 
   b:"Józef Piłsudski", 
   c:"Ignacy Daszyński", 
   d:"Wincenty Witos"},

  {cat:"Historia", q:"Kim była Róża Luksemburg?", 
   a:"Działaczką socjalistyczną SDKPiL", 
   b:"Przywódczynią ruchu ludowego", 
   c:"Pisarką Młodej Polski", 
   d:"Działaczką obozu narodowego"},

  {cat:"Historia", q:"Kim był Aleksander Wielopolski?", 
   a:"Politykiem dążącym do ugody z Rosją", 
   b:"Dyktatorem powstania styczniowego", 
   c:"Przywódcą PPS", 
   d:"Dowódcą wojsk pruskich"},

  {cat:"Historia", q:"Jakie poglądy mieli biali?", 
   a:"Popierali legalną działalność i kompromis", 
   b:"Domagali się natychmiastowej walki zbrojnej", 
   c:"Głosili idee socjalistyczne", 
   d:"Chcieli germanizacji ziem polskich"},

  {cat:"Historia", q:"Jakie cele mieli czerwoni?", 
   a:"Dążyli do wybuchu powstania zbrojnego", 
   b:"Popierali współpracę z carem", 
   c:"Bronili interesów ziemiaństwa", 
   d:"Wspierali autonomię Galicji"},

  {cat:"Historia", q:"Czym była branka?", 
   a:"Przymusowym poborem do armii rosyjskiej", 
   b:"Reformą uwłaszczeniową chłopów", 
   c:"Tajnym nauczaniem młodzieży", 
   d:"Akcją germanizacyjną w szkołach"},

  {cat:"Historia", q:"Jak zakończyło się powstanie styczniowe?", 
   a:"Klęską militarną i polityczną", 
   b:"Częściowym zwycięstwem Polaków", 
   c:"Uzyskaniem autonomii", 
   d:"Interwencją mocarstw zachodnich"},

  {cat:"Historia", q:"Kim był Marian Langiewicz?", 
   a:"Jednym z dyktatorów powstania styczniowego", 
   b:"Przywódcą ruchu narodowego", 
   c:"Autorem Trylogii", 
   d:"Namiestnikiem Królestwa Polskiego"},

  {cat:"Historia", q:"Kim był Romuald Traugutt?", 
   a:"Ostatnim dyktatorem powstania styczniowego", 
   b:"Przywódcą białych", 
   c:"Twórcą pozytywizmu", 
   d:"Dowódcą armii pruskiej"},

  {cat:"Historia", q:"Kiedy upadło powstanie styczniowe?", 
   a:"Jesienią 1864 roku", 
   b:"Wiosną 1863 roku", 
   c:"Latem 1862 roku", 
   d:"Zimą 1865 roku"},

  {cat:"Historia", q:"Na czym polegało uwłaszczenie chłopów?", 
   a:"Nadaniu chłopom ziemi na własność", 
   b:"Zwiększeniu pańszczyzny", 
   c:"Zakazie osiedlania się na wsi", 
   d:"Wprowadzeniu podatku gruntowego"},

  {cat:"Historia", q:"Jakie represje spotkały Polaków po powstaniu?", 
   a:"Zsyłki, konfiskaty majątków i rusyfikacja", 
   b:"Autonomia i wolność prasy", 
   c:"Reformy demokratyczne", 
   d:"Wsparcie gospodarcze cara"},

  {cat:"Historia", q:"Czym była noc apuchtinowska?", 
   a:"Okresem ostrej rusyfikacji szkolnictwa", 
   b:"Nocą wybuchu powstania", 
   c:"Strajkiem robotników", 
   d:"Reformą rolną"},

  {cat:"Historia", q:"Na czym polegała germanizacja?", 
   a:"Narzu-caniu języka i kultury niemieckiej", 
   b:"Wspieraniu polskiej edukacji", 
   c:"Rozwoju autonomii Galicji", 
   d:"Industrializacji Królestwa Polskiego"},

  {cat:"Historia", q:"Czym były rugi pruskie?", 
   a:"Wysiedleniami Polaków z zaboru pruskiego", 
   b:"Strajkami szkolnymi", 
   c:"Reformą administracyjną", 
   d:"Akcją uwłaszczeniową"},

  {cat:"Historia", q:"Na czym polegała praca organiczna?", 
   a:"Równomiernym rozwoju społeczeństwa", 
   b:"Przygotowaniu powstania", 
   c:"Walka zbrojna z zaborcą", 
   d:"Germanizacji ziem polskich"},

  {cat:"Historia", q:"Czym była praca u podstaw?", 
   a:"Edukacją najniższych warstw społecznych", 
   b:"Rozwojem przemysłu ciężkiego", 
   c:"Działalnością dyplomatyczną", 
   d:"Walką partyzancką"},

  {cat:"Historia", q:"Co oznacza literatura ku pokrzepieniu serc?", 
   a:"Umacnianie patriotyzmu i nadziei", 
   b:"Krytykę społeczeństwa", 
   c:"Propagowanie germanizacji", 
   d:"Literaturę naukową"},

  {cat:"Historia", q:"Który zabór miał największą autonomię?", 
   a:"Zabór austriacki (Galicja)", 
   b:"Zabór rosyjski", 
   c:"Zabór pruski", 
   d:"Zabór szwedzki"},

  {cat:"Historia", q:"W którym zaborze rolnictwo było najlepiej rozwinięte?", 
   a:"W zaborze pruskim", 
   b:"W zaborze rosyjskim", 
   c:"W zaborze austriackim", 
   d:"W Królestwie Polskim"},

  {cat:"Historia", q:"W którym zaborze rozwijał się przemysł?", 
   a:"W zaborze rosyjskim", 
   b:"W zaborze austriackim", 
   c:"W zaborze pruskim", 
   d:"W Galicji Wschodniej"},

  {cat:"Historia", q:"Kim byli robotnicy?", 
   a:"Pracownikami przemysłu i fabryk", 
   b:"Właścicielami ziemskimi", 
   c:"Urzędnikami państwowymi", 
   d:"Duchowieństwem"},

  {cat:"Historia", q:"Kim była burżuazja?", 
   a:"Zamożną warstwą mieszczaństwa", 
   b:"Grupą chłopów", 
   c:"Warstwą robotniczą", 
   d:"Szlachtą zaściankową"},

  {cat:"Historia", q:"Na czym polegała asymilacja Żydów?", 
   a:"Przyswajaniu języka i kultury polskiej", 
   b:"Przymusowych wysiedleniach", 
   c:"Izolacji społecznej", 
   d:"Udziale w powstaniach"},

  {cat:"Historia", q:"Czym była PPS?", 
   a:"Polską Partią Socjalistyczną", 
   b:"Partią narodową", 
   c:"Stronnictwem ludowym", 
   d:"Organizacją carską"},

  {cat:"Historia", q:"Czym była SDKPiL?", 
   a:"Socjaldemokracją Królestwa Polskiego i Litwy", 
   b:"Partią chłopską", 
   c:"Stronnictwem narodowym", 
   d:"Związkiem zawodowym"},

  {cat:"Historia", q:"Czym był ruch ludowy?", 
   a:"Ruchem reprezentującym interesy chłopów", 
   b:"Ruchem robotniczym", 
   c:"Ruchem arystokracji", 
   d:"Ruchem germanizacyjnym"},

  {cat:"Historia", q:"Czym był Ruch Narodowy?", 
   a:"Ruchem stawiającym naród na pierwszym miejscu", 
   b:"Ruchem socjalistycznym", 
   c:"Ruchem chłopskim", 
   d:"Ruchem lojalistów carskich"},

  {cat:"Historia", q:"Czym była Młoda Polska?", 
   a:"Kierunkiem modernistycznym w kulturze", 
   b:"Ruchem politycznym", 
   c:"Organizacją niepodległościową", 
   d:"Programem gospodarczym"}
];

let current = 0;
let life = 10;
let score = 0;
let used = [];
let maxQ = questions.length;
let record = localStorage.getItem("szkola") || 0;
let dawid108 = localStorage.getItem("dawid108") || 0;

function newGame(){
    life = 10; score = 0; used = [];
    document.getElementById("endScreen").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    updateStats();
    nextQuestion();
}

function updateStats(){
    document.getElementById("life").innerText = life;
    document.getElementById("score").innerText = score;
}

function nextQuestion(){
    if(used.length === maxQ){ return win(); }

    let id;
    do{ id = Math.floor(Math.random()*maxQ); }
    while(used.includes(id));

    used.push(id);
    current = questions[id];

    document.getElementById("category").innerText = current.cat;
    document.getElementById("question").innerText = current.q;

    document.getElementById("counter").innerText = "Pytanie " + used.length + " / " + maxQ;

    // Mieszanie odpowiedzi
    let arr = [
        {txt: current.a, correct: true},
        {txt: current.b, correct: false},
        {txt: current.c, correct: false},
        {txt: current.d, correct: false}
    ];
    arr.sort(()=>Math.random()-0.5);

    let ansDiv = document.getElementById("answers");
    ansDiv.innerHTML = "";

    arr.forEach(a=>{
        let btn = document.createElement("div");
        btn.classList.add("btn");
        btn.innerText = a.txt;
        btn.onclick = ()=>answer(a.correct, btn);
        ansDiv.appendChild(btn);
    });
}

function answer(correct, btn){
    let buttons = document.querySelectorAll(".btn");
    buttons.forEach(b=>b.style.pointerEvents="none");

    if(correct){
        btn.classList.add("correct");
        score++;
        dawid108++;
        localStorage.setItem("dawid108", dawid108);
        console.log("dawid108:", dawid108);
        updateStats();
        setTimeout(()=>nextQuestion(), 1500);
    }else{
        btn.classList.add("wrong");
        // pokaż poprawną
        buttons.forEach(b=>{
            if(b.innerText === current.a) b.classList.add("correct");
        });
        life--;
        updateStats();
        if(life <= 0){ setTimeout(()=>gameOver(), 6000); }
        else{ setTimeout(()=>nextQuestion(), 5000); }
    }
}

function win(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");
    document.getElementById("endTitle").innerText = "Wygrałeś!";
    endScreen();
}

function gameOver(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");
    document.getElementById("endTitle").innerText = "Koniec gry";
    endScreen();
}

function endScreen(){
    document.getElementById("finalScore").innerText = score;

    if(score > record){
        record = score;
        localStorage.setItem("szkola", record);
    }

    document.getElementById("record").innerText = record;
    document.getElementById("dawid108").innerText = dawid108;
}

newGame();
</script>
</body>
</html>
