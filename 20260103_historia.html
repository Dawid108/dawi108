<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Historia</title>
<script src="script.js"></script>
<link rel="icon" href="dawi108.png" type="image/png">
<style>
body{
background:#0d102b;
color:white;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}
#game, #endScreen{
width:90%; max-width:500px;
background:#13173d;
padding:20px;
border-radius:20px;
text-align:center;
box-shadow:0 0 20px #0006;
}
.category{font-size:18px;margin-bottom:10px;color:#7dd7ff;}
.question{font-size:20px;margin-bottom:20px;}
.btn{background:#1c2257;padding:12px;border-radius:10px;margin:10px 0;cursor:pointer;transition:.2s;}
.btn:hover{background:#27307a;}
.correct{background:#1fa84f !important;}
.wrong{background:#c62828 !important;}
#stats{display:flex;justify-content:space-between;margin-bottom:20px;color:#9bbcff;}
#counter{margin-top:10px;color:#9bbcff;}
.hidden{display:none;}
#endScreen button{margin-top:15px;background:#6f85ff;padding:10px 20px;border:none;border-radius:10px;color:white;font-size:18px;cursor:pointer;}
</style>
</head>
<body>

<div id="game">
    <div id="stats">
        <div>Życia: <span id="life">10</span></div>
        <div>Punkty: <span id="score">0</span></div>
    </div>
    <div class="category" id="category"></div>
    <div class="question" id="question"></div>
    <div id="answers"></div>
    <div id="counter"></div>
</div>

<div id="endScreen" class="hidden">
    <h2 id="endTitle"></h2>
    <p>Twój wynik: <span id="finalScore"></span></p>
    <p>Twój rekord: <span id="record"></span></p>
    <p>Suma punktów: <span id="dawid108"></span></p>
    <button onclick="newGame()">Nowa Gra</button>
</div>

<script>
// PYTANIA
let questions = [
{cat:"Historia", q:"Pierwsze Starożytne Igrzyska Olimpijskie", 
a:"776 p.n.e.", 
b:"780 p.n.e.", 
c:"770 p.n.e.", 
d:"750 p.n.e."},

{cat:"Historia", q:"Założenie Rzymu", 
a:"753 p.n.e.", 
b:"750 p.n.e.", 
c:"760 p.n.e.", 
d:"700 p.n.e."},

{cat:"Historia", q:"Upadek Cesarstwa Rzymskiego Zachodniego", 
a:"476", 
b:"470", 
c:"480", 
d:"455"},

{cat:"Historia", q:"Chrzest Polski", 
a:"966", 
b:"960", 
c:"972", 
d:"950"},

{cat:"Historia", q:"Śmierć Św. Wojciecha", 
a:"997", 
b:"995", 
c:"1000", 
d:"990"},

{cat:"Historia", q:"Zjazd w Gnieźnie", 
a:"1000", 
b:"999", 
c:"1005", 
d:"990"},

{cat:"Historia", q:"Koronacja Bolesława Chrobrego", 
a:"1025", 
b:"1020", 
c:"1030", 
d:"1018"},

{cat:"Historia", q:"Wielka Schizma Wschodnia", 
a:"1054", 
b:"1050", 
c:"1060", 
d:"1040"},

{cat:"Historia", q:"Sprowadzenie Krzyżaków do Polski", 
a:"1226", 
b:"1220", 
c:"1230", 
d:"1215"},

{cat:"Historia", q:"Utworzenie Akademii Krakowskiej", 
a:"1364", 
b:"1360", 
c:"1370", 
d:"1350"},

{cat:"Historia", q:"Umowa z Litwą", 
a:"1385", 
b:"1380", 
c:"1390", 
d:"1375"},

{cat:"Historia", q:"Unia w Krewie z Litwą", 
a:"1386", 
b:"1385", 
c:"1390", 
d:"1370"},

{cat:"Historia", q:"Wielka Wojna z Krzyżakami", 
a:"1409-1411", 
b:"1408-1410", 
c:"1410-1412", 
d:"1399-1401"},

{cat:"Historia", q:"Bitwa pod Grunwaldem", 
a:"15.07.1410", 
b:"14.07.1410", 
c:"15.06.1410", 
d:"15.07.1409"},

{cat:"Historia", q:"Pierwszy Pokój Toruński", 
a:"1411", 
b:"1410", 
c:"1415", 
d:"1405"},

{cat:"Historia", q:"Wynalezienie druku przez Jana Gutenberga", 
a:"1450", 
b:"1445", 
c:"1455", 
d:"1460"},

{cat:"Historia", q:"Zdobycie Konstantynopola przez Turków", 
a:"1453", 
b:"1450", 
c:"1460", 
d:"1440"},

{cat:"Historia", q:"Odkrycie Ameryki przez Krzysztofa Kolumba", 
a:"1492", 
b:"1490", 
c:"1500", 
d:"1485"},

{cat:"Historia", q:"Vasco da Gama dotarł drogą morską do Indii", 
a:"1498", 
b:"1495", 
c:"1502", 
d:"1488"},

{cat:"Historia", q:"Wystąpienie Marcina Lutra", 
a:"1517", 
b:"1515", 
c:"1520", 
d:"1505"},

{cat:"Historia", q:"Wyprawa Ferdynanda Magellana", 
a:"1519-1522", 
b:"1518-1520", 
c:"1520-1523", 
d:"1509-1512"},

{cat:"Historia", q:"Unia Lubelska", 
a:"1569", 
b:"1565", 
c:"1573", 
d:"1550"},

{cat:"Historia", q:"Bitwa pod Chocimiem", 
a:"1621", 
b:"1620", 
c:"1625", 
d:"1610"},

{cat:"Historia", q:"Potop Szwedzki", 
a:"1655-1660", 
b:"1650-1655", 
c:"1660-1665", 
d:"1648-1654"},

{cat:"Historia", q:"Bitwa pod Wiedniem", 
a:"1683", 
b:"1680", 
c:"1690", 
d:"1670"},

{cat:"Historia", q:"Powstanie Kościuszkowskie", 
a:"1744", 
b:"1740", 
c:"1750", 
d:"1730"},

{cat:"Historia", q:"Pierwszy rozbiór Polski", 
a:"1772", 
b:"1770", 
c:"1775", 
d:"1765"},

{cat:"Historia", q:"Drugi rozbiór Polski", 
a:"1792", 
b:"1790", 
c:"1793", 
d:"1788"},

{cat:"Historia", q:"Trzeci rozbiór Polski", 
a:"1795", 
b:"1794", 
c:"1796", 
d:"1800"},

{cat:"Historia", q:"Odzyskanie niepodległości przez Polskę", 
a:"1918", 
b:"1917", 
c:"1920", 
d:"1914"},

{cat:"Historia", q:"Wybuch Powstania Wielkopolskiego", 
a:"27.12.1918", 
b:"11.11.1918", 
c:"01.01.1919", 
d:"26.12.1918"},

{cat:"Historia", q:"Rozpoczęcie II wojny światowej", 
a:"1.09.1939", 
b:"31.08.1939", 
c:"3.09.1939", 
d:"1.09.1938"},

{cat:"Historia", q:"776 p.n.e.", 
a:"Pierwsze Starożytne Igrzyska Olimpijskie", 
b:"Założenie Rzymu", 
c:"Powstanie demokracji ateńskiej", 
d:"Podbój Grecji przez Rzym"},

{cat:"Historia", q:"753 p.n.e.", 
a:"Założenie Rzymu", 
b:"Pierwsze Starożytne Igrzyska Olimpijskie", 
c:"Upadek Troi", 
d:"Powstanie Imperium Rzymskiego"},

{cat:"Historia", q:"476", 
a:"Upadek Cesarstwa Rzymskiego Zachodniego", 
b:"Podział Cesarstwa Rzymskiego", 
c:"Chrzest Franków", 
d:"Upadek Cesarstwa Rzymskiego Wschodniego"},

{cat:"Historia", q:"966", 
a:"Chrzest Polski", 
b:"Zjazd w Gnieźnie", 
c:"Koronacja Bolesława Chrobrego", 
d:"Przyjęcie chrześcijaństwa przez Czechy"},

{cat:"Historia", q:"997", 
a:"Śmierć Św. Wojciecha", 
b:"Chrzest Polski", 
c:"Zjazd w Gnieźnie", 
d:"Koronacja Bolesława Chrobrego"},

{cat:"Historia", q:"1000", 
a:"Zjazd w Gnieźnie", 
b:"Koronacja Bolesława Chrobrego", 
c:"Chrzest Polski", 
d:"Sprowadzenie Krzyżaków do Polski"},

{cat:"Historia", q:"1025", 
a:"Koronacja Bolesława Chrobrego", 
b:"Chrzest Polski", 
c:"Zjazd w Gnieźnie", 
d:"Unia z Litwą"},

{cat:"Historia", q:"1054", 
a:"Wielka Schizma Wschodnia", 
b:"Upadek Cesarstwa Rzymskiego Zachodniego", 
c:"Krucjata do Ziemi Świętej", 
d:"Chrzest Rusi Kijowskiej"},

{cat:"Historia", q:"1226", 
a:"Sprowadzenie Krzyżaków do Polski", 
b:"Unia z Litwą", 
c:"Bitwa pod Grunwaldem", 
d:"Koronacja Władysława Łokietka"},

{cat:"Historia", q:"1364", 
a:"Utworzenie Akademii Krakowskiej", 
b:"Unia w Krewie", 
c:"Bitwa pod Grunwaldem", 
d:"Pierwszy Pokój Toruński"},

{cat:"Historia", q:"1385", 
a:"Umowa z Litwą", 
b:"Bitwa pod Grunwaldem", 
c:"Unia Lubelska", 
d:"Zjazd w Gnieźnie"},

{cat:"Historia", q:"1386", 
a:"Unia z Litwą w Krewie", 
b:"Umowa z Litwą", 
c:"Unia Lubelska", 
d:"Koronacja Bolesława Chrobrego"},

{cat:"Historia", q:"1409–1411", 
a:"Wielka Wojna z Krzyżakami", 
b:"Bitwa pod Grunwaldem", 
c:"Potop Szwedzki", 
d:"Wojna trzynastoletnia"},

{cat:"Historia", q:"15.07.1410", 
a:"Bitwa pod Grunwaldem", 
b:"Pierwszy Pokój Toruński", 
c:"Wielka Wojna z Krzyżakami", 
d:"Bitwa pod Wiedniem"},

{cat:"Historia", q:"1411", 
a:"Pierwszy Pokój Toruński", 
b:"Bitwa pod Grunwaldem", 
c:"Drugi Pokój Toruński", 
d:"Unia Lubelska"},

{cat:"Historia", q:"1450", 
a:"Wynalezienie druku przez Jana Gutenberga", 
b:"Odkrycie Ameryki", 
c:"Upadek Konstantynopola", 
d:"Początek reformacji"},

{cat:"Historia", q:"1453", 
a:"Zdobycie Konstantynopola przez Turków", 
b:"Wynalezienie druku", 
c:"Odkrycie Ameryki", 
d:"Początek reformacji"},

{cat:"Historia", q:"1492", 
a:"Odkrycie Ameryki przez Krzysztofa Kolumba", 
b:"Dotarcie Vasco da Gamy do Indii", 
c:"Zdobycie Konstantynopola", 
d:"Wynalezienie druku"},

{cat:"Historia", q:"1498", 
a:"Vasco da Gama dotarł drogą morską do Indii", 
b:"Odkrycie Ameryki", 
c:"Wyprawa Magellana", 
d:"Początek reformacji"},

{cat:"Historia", q:"1517", 
a:"Wystąpienie Marcina Lutra", 
b:"Wynalezienie druku", 
c:"Odkrycie Ameryki", 
d:"Unia Lubelska"},

{cat:"Historia", q:"1519–1522", 
a:"Wyprawa Ferdynanda Magellana", 
b:"Wystąpienie Marcina Lutra", 
c:"Unia Lubelska", 
d:"Bitwa pod Chocimiem"},

{cat:"Historia", q:"1569", 
a:"Unia Lubelska", 
b:"Unia w Krewie", 
c:"Potop Szwedzki", 
d:"Bitwa pod Chocimiem"},

{cat:"Historia", q:"1621", 
a:"Bitwa pod Chocimiem", 
b:"Bitwa pod Wiedniem", 
c:"Potop Szwedzki", 
d:"Unia Lubelska"},

{cat:"Historia", q:"1655–1660", 
a:"Potop Szwedzki", 
b:"Wielka Wojna z Krzyżakami", 
c:"Bitwa pod Wiedniem", 
d:"Powstanie Kościuszkowskie"},

{cat:"Historia", q:"1683", 
a:"Bitwa pod Wiedniem", 
b:"Bitwa pod Chocimiem", 
c:"Potop Szwedzki", 
d:"Unia Lubelska"},

{cat:"Historia", q:"1744", 
a:"Powstanie Kościuszkowskie", 
b:"Konfederacja barska", 
c:"Pierwszy rozbiór Polski", 
d:"Insurekcja warszawska"},

{cat:"Historia", q:"1772", 
a:"Pierwszy rozbiór Polski", 
b:"Drugi rozbiór Polski", 
c:"Konstytucja 3 maja", 
d:"Powstanie Kościuszkowskie"},

{cat:"Historia", q:"1792", 
a:"Drugi rozbiór Polski", 
b:"Pierwszy rozbiór Polski", 
c:"Trzeci rozbiór Polski", 
d:"Konstytucja 3 maja"},

{cat:"Historia", q:"1795", 
a:"Trzeci rozbiór Polski", 
b:"Drugi rozbiór Polski", 
c:"Powstanie Kościuszkowskie", 
d:"Kongres wiedeński"},

{cat:"Historia", q:"11.11.1918", 
a:"Odzyskanie niepodległości przez Polskę", 
b:"Wybuch I wojny światowej", 
c:"Wybuch II wojny światowej", 
d:"Powstanie styczniowe"},

{cat:"Historia", q:"27.12.1918", 
a:"Wybuch Powstania Wielkopolskiego", 
b:"Odzyskanie niepodległości przez Polskę", 
c:"Wybuch wojny polsko-bolszewickiej", 
d:"Wybuch II wojny światowej"},

{cat:"Historia", q:"1.09.1939", 
a:"Rozpoczęcie II wojny światowej", 
b:"Odzyskanie niepodległości przez Polskę", 
c:"Atak na Pearl Harbor", 
d:"Koniec I wojny światowej"}
];

let current = 0;
let life = 10;
let score = 0;
let used = [];
let maxQ = questions.length;
let record = localStorage.getItem("szkola") || 0;
let dawid108 = localStorage.getItem("dawid108") || 0;

function newGame(){
    life = 10; score = 0; used = [];
    document.getElementById("endScreen").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    updateStats();
    nextQuestion();
}

function updateStats(){
    document.getElementById("life").innerText = life;
    document.getElementById("score").innerText = score;
}

function nextQuestion(){
    if(used.length === maxQ){ return win(); }

    let id;
    do{ id = Math.floor(Math.random()*maxQ); }
    while(used.includes(id));

    used.push(id);
    current = questions[id];

    document.getElementById("category").innerText = current.cat;
    document.getElementById("question").innerText = current.q;

    document.getElementById("counter").innerText = "Pytanie " + used.length + " / " + maxQ;

    // Mieszanie odpowiedzi
    let arr = [
        {txt: current.a, correct: true},
        {txt: current.b, correct: false},
        {txt: current.c, correct: false},
        {txt: current.d, correct: false}
    ];
    arr.sort(()=>Math.random()-0.5);

    let ansDiv = document.getElementById("answers");
    ansDiv.innerHTML = "";

    arr.forEach(a=>{
        let btn = document.createElement("div");
        btn.classList.add("btn");
        btn.innerText = a.txt;
        btn.onclick = ()=>answer(a.correct, btn);
        ansDiv.appendChild(btn);
    });
}

function answer(correct, btn){
    let buttons = document.querySelectorAll(".btn");
    buttons.forEach(b=>b.style.pointerEvents="none");

    if(correct){
        btn.classList.add("correct");
        score++;
        dawid108++;
        localStorage.setItem("dawid108", dawid108);
        console.log("dawid108:", dawid108);
        updateStats();
        setTimeout(()=>nextQuestion(), 300);
    }else{
        btn.classList.add("wrong");
        // pokaż poprawną
        buttons.forEach(b=>{
            if(b.innerText === current.a) b.classList.add("correct");
        });
        life--;
        updateStats();
        if(life <= 0){ setTimeout(()=>gameOver(), 2000); }
        else{ setTimeout(()=>nextQuestion(), 3000); }
    }
}

function win(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");
    document.getElementById("endTitle").innerText = "Wygrałeś!";
    endScreen();
}

function gameOver(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("endScreen").classList.remove("hidden");
    document.getElementById("endTitle").innerText = "Koniec gry";
    endScreen();
}

function endScreen(){
    document.getElementById("finalScore").innerText = score;

    if(score > record){
        record = score;
        localStorage.setItem("szkola", record);
    }

    document.getElementById("record").innerText = record;
    document.getElementById("dawid108").innerText = dawid108;
}

newGame();

if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./20260106_sw.js');
}
</script>
</body>
</html>
